<% title = "Chat with " + user.name %>

<div class="container-fluid">
  <div class="d-flex align-items-center mb-3">
    <img src="/<%= user.profilePhoto %>" class="rounded-circle me-3" width="50" height="50" />
    <h4 class="mb-0">Chat with <%= user.name %></h4>
  </div>

  <div class="border rounded p-3 mb-3" style="height: 60vh; overflow-y: scroll; background: #f0f0f0;">
    <% messages.forEach(msg => { %>
      <div class="<%= msg.sender === myEmail ? 'text-end' : 'text-start' %> mb-2">
        <div class="d-inline-block px-3 py-2 rounded <%= msg.sender === myEmail ? 'bg-primary text-white' : 'bg-light' %>">
          <%= msg.content %>
        </div>
      </div>
    <% }) %>
  </div>

  <form action="/messages/<%= user.email %>" method="POST">
    <div class="input-group">
      <input type="text" name="message" class="form-control" placeholder="Type your message..." required>
      <button type="submit" class="btn btn-primary">Send</button>
    </div>
  </form>
</div>
